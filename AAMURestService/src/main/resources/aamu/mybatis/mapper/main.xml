<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="aamu.mybatis.mapper.main">
	<insert id="placeInsert" parameterType="attrDTO">
		INSERT INTO places VALUES(#{contentid},#{areacode},#{contenttypeid},#{sigungucode},#{title},#{addr},#{bigImage},#{smallImage},#{mapx},#{mapy},#{kakaokey},#{tel},#{url})
	</insert>
	<insert id="infoInsert" parameterType="attrDTO">
		INSERT INTO placesinfo VALUES(#{contentid},#{resttime},#{playtime},#{park})
	</insert>
	<insert id="hotelInsert" parameterType="attrDTO">
		INSERT INTO hotelinfo VALUES(#{contentid},#{checkin},#{checkout})
	</insert>
	<insert id="dinerInsert" parameterType="attrDTO">
		INSERT INTO dinerinfo VALUES(#{contentid},#{menu})
	</insert>
	<insert id="eventInsert" parameterType="attrDTO">
		INSERT INTO eventinfo VALUES(#{contentid},TO_DATE(#{eventstart},'YYYY-MM-DD'),TO_DATE(#{eventend},'YYYY-MM-DD'),#{charge},#{playtime})
	</insert>
	
	<select id="selectPlacesList" parameterType="Map" resultType="attrDTO">
		SELECT p.*,i.* FROM places p JOIN placesinfo i ON p.contentid=i.contentid WHERE p.areacode=#{areacode} AND p.contenttypeid=#{contenttypeid} AND <![CDATA[rownum<=20]]>
	</select>
	
	<insert id="plannerInsert" parameterType="planDTO">
		INSERT INTO routeboard VALUES(SEQ_PLA.NEXTVAL,#{title},SYSDATE,#{id})
	</insert>
	
	<insert id="routeInsert" parameterType="routeDTO">
		INSERT INTO route VALUES(#{contentid}.#{day},#{starttime},#{atime},#{mtime})
	</insert>
</mapper>