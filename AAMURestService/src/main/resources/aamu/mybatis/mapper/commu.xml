<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="aamu.mybatis.mapper.adminCommu">

	<!-- 커뮤니티 게시글 목록 뿌려주기-->
	<select id="commuSelectList" resultType="commuDTO" >
		SELECT c.* , u.userprofile, cc.cno, cc.id, cc.reply, photo, place
		FROM community c, users u,commucomment cc, commuphoto cph, commuplace cpl
		WHERE c.id = u.id
		AND c.lno = cc.lno
		AND c.lno = cph.lno
		AND c.lno = cpl.lno
	</select>
	
	<!-- 커뮤니티 댓글 한개 뿌려주기 -->
	<select id="commuCommentSelectOne" parameterType="String" resultType="commuCommentDTO" >
		SELECT * FROM commucomment WHERE lno=#{lno} AND ROWNUM = 1
	</select>
	
	<insert id="commuInsert" parameterType="Map" useGeneratedKeys="true" keyProperty="lno">
		INSERT INTO community
		VALUES (SEQ_COM.NEXTVAL,#{id},#{title},#{content},DEFAULT,DEFAULT,DEFAULT)
	</insert>
	
	<insert id="photoInsert" parameterType="Map" >
		INSERT INTO commuphoto
		VALUES (#{lno},#{photo})
	</insert>
	
	<insert id="placeInsert" parameterType="Map" useGeneratedKeys="true" keyProperty="lno">
		INSERT INTO commuplace
		VALUES (#{lno},#{place})
	</insert>
	
	
	
	
	
</mapper>